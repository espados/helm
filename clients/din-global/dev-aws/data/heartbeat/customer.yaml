name: customer-heartbeat-cronjob
namespace: data-din-global

imagePullSecrets:
  - name: docker-hub-secrets

image:
  imagePath: 187429986583.dkr.ecr.us-east-1.amazonaws.com/din-global/heartbeat2
  pullPolicy: Always
  tag: latest

cronSchedule: '0 */15 * ? * *'

command:
  - python
  - -m
  - heartbeat.main

secret:
  name: customer-heartbeat-secret

env:
  normal:
    LOGGING_LEVEL: INFO
    DB_HOST: "db.internal.dbank:5432"
    DEFAULT_SCHEMA: 'customer'
  secret:
    DB_USER: "<path:customer/din-global/dev/data/liquibase/creds#username>"
    DB_PASSWORD: "<path:customer/din-global/dev/data/liquibase/creds#password>"

restartPolicy: onFailure

nodeSelector:
  dtools: "true"

tolerations:
  - key: "dtools"
    operator: "Equal"
    value: "true"
    effect: "NoSchedule"
